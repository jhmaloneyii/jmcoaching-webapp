<% provide(:title, "Blog: Admin Index") %>

<div class="container">
  <div class="row">
    <div class="col-lg-12 mx-auto">
      <h1>Blog Admin</h1>
      <%= link_to "Create New Post", new_admin_post_path %>
      <%= will_paginate @posts, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>

      <table class="table table-hover table-responsive">
        <tr>
          <th>Title</th>
          <th>Active?</th>
          <th>Image</th>
          <th>Tags</th>
          <th colspan="2"></th>
        </tr>
        <% @posts.each do |post| %>
          <tr>
            <td><h3><%= link_to "#{post.title}", post %></h3></td>
            <td><p><%= post.active ? "Yes" : "No" %></p></td>
            <td><p><%= if post.image then post.image_url.to_s end %></p></td>
            <td><p><%= post.tags.map { |tag| tag.name }.join(", ") %></p></td>
            <td><%= link_to "Edit", edit_admin_post_path(post.id) %></td>
            <td><%= link_to "Delete", admin_post_path(post.id), method: :delete, data: {confirm: "Are you sure you want to delete?"} %></td>
          </tr>
        <%end%>
      </table>
      <%= will_paginate @posts, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
    </div>
  </div>
</div>
